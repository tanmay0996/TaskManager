# Task Manager

Minimal full-stack Task Manager application built with:

- **Backend**: Node.js, Express, MongoDB (Mongoose), JWT auth, Jest + Supertest
- **Frontend**: React, Vite, Redux Toolkit, Tailwind CSS, Vitest + Testing Library
- âœ… Unit tests for both backend (Jest + Supertest) and frontend (Vitest + React Testing Library)

---

# Demo Video

ðŸŽ¥https://www.loom.com/share/4278377157824fdcb8d7ffddd9c4d044

---

## 1. Project Structure

- **`backend/`** â€“ REST API (authentication + task management)
- **`frontend/`** â€“ React SPA that consumes the API

You typically run **both** parts during development.

---

## 2. Local Setup

### 2.1 Prerequisites

- **Node.js** (LTS recommended)
- **npm** (bundled with Node)
- A running **MongoDB** instance (local or remote)

### 2.2 Backend Setup (`backend/`)

1. Open a terminal in the `backend` folder:

   ```bash
   cd backend
   ```

2. Install dependencies:

   ```bash
   npm install
   ```

3. Create a `.env` file based on `.env.example` and set at least:

   ```env
   MONGO_URI=mongodb://localhost:27017/taskmanager
   JWT_SECRET=your_jwt_secret_here
   PORT=8000 # optional, defaults to 8000
   ```

### 2.3 Frontend Setup (`frontend/`)

1. Open a terminal in the `frontend` folder:

   ```bash
   cd frontend
   ```

2. Install dependencies:

   ```bash
   npm install
   ```



3. Create a `.env`  and set at least:

   ```env
   VITE_API_BASE_URL=`http://localhost:8000/api`
   ```

---

## 3. Running the Application

### 3.1 Run Backend (API)

From `backend/`:

- **Development mode** (with nodemon):

  ```bash
  npm run dev
  ```

- **Production / normal run**:

  ```bash
  npm start
  ```

By default, the API listens on `http://localhost:8000`.

Health check:

- `GET /` â†’ `{ "message": "Task Manager API running" }`

### 3.2 Run Frontend (React app)

From `frontend/`:

- **Development server** (Vite):

  ```bash
  npm run dev
  ```

  Vite will show the dev URL (commonly `http://localhost:5173`).

- **Production build**:

  ```bash
  npm run build
  ```

- **Preview production build**:

  ```bash
  npm run preview
  ```

Ensure the backend CORS allows your frontend origin. The backend is already configured for:

- `http://localhost:5173`
- `https://taskmanager-1-n8es.onrender.com`

---

## 4. Running Tests & Viewing Coverage Report

### 4.1 Backend Tests (Jest)

From `backend/`:

- **Run tests**:

  ```bash
  npm test
  ```

- **Run tests with coverage**:

  ```bash
  npm run test:coverage
  ```

Coverage reports are generated by Jest (check the output for the coverage directory, typically `coverage/`).

### 4.2 Frontend Tests (Vitest)

From `frontend/`:

- **Run tests**:

  ```bash
  npm test
  ```

- **Run tests with coverage**:

  ```bash
  npm run test:coverage
  ```

Coverage is produced by Vitest (usually under `coverage/`).

---

## 5. API Documentation

Base URL (local dev):

```text
http://localhost:8000
```

All task routes require a valid **JWT** access token returned from the login endpoint and must be sent via `Authorization: Bearer <token>` header.

### 5.1 Health Check

- **GET /**
  - **Description**: Simple health check endpoint.
  - **Auth**: Not required.
  - **Response 200**:
    ```json
    {
      "message": "Task Manager API running"
    }
    ```

---

### 5.2 Auth Endpoints

All auth routes are prefixed with `/api/auth`.

#### POST /api/auth/register

- **Description**: Register a new user.
- **Auth**: Not required.
- **Request body** (JSON):
  ```json
  {
    "username": "john",
    "password": "secret123"
  }
  ```
- **Responses**:
  - `201 Created`
    ```json
    {
      "message": "User registered successfully"
    }
    ```
  - `400 Bad Request` â€“ missing fields or username already taken
    ```json
    {
      "error": "Username and password are required"
    }
    ```
    or
    ```json
    {
      "error": "Username already taken"
    }
    ```
  - `500 Internal Server Error`

#### POST /api/auth/login

- **Description**: Log in an existing user and obtain a JWT.
- **Auth**: Not required.
- **Request body** (JSON):
  ```json
  {
    "username": "john",
    "password": "secret123"
  }
  ```
- **Responses**:
  - `200 OK`
    ```json
    {
      "token": "<jwt-token>"
    }
    ```
  - `400 Bad Request` â€“ missing username or password
    ```json
    {
      "error": "Username and password are required"
    }
    ```
  - `401 Unauthorized` â€“ invalid credentials
    ```json
    {
      "error": "Invalid credentials"
    }
    ```
  - `500 Internal Server Error`

---

### 5.3 Task Endpoints

All task routes are prefixed with `/api/tasks` and require a valid JWT.

Include header:

```http
Authorization: Bearer <token>
```

#### GET /api/tasks

- **Description**: List tasks for the logged-in user.
- **Auth**: Required.
- **Request**: No body.
- **Response 200**:
  ```json
  [
    {
      "_id": "...",
      "userId": "...",
      "title": "Task title",
      "description": "Optional description",
      "status": "pending" | "in-progress" | "completed",
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z"
    }
  ]
  ```
- **Error responses**:
  - `500 Internal Server Error`

#### POST /api/tasks

- **Description**: Create a new task for the logged-in user.
- **Auth**: Required.
- **Request body** (JSON):
  ```json
  {
    "title": "New task",
    "description": "Optional description",
    "status": "pending"
  }
  ```
  - `title` is **required**.
  - `description` defaults to empty string if omitted.
  - `status` defaults to `"pending"` if omitted.

- **Responses**:
  - `201 Created`
    ```json
    {
      "_id": "...",
      "userId": "...",
      "title": "New task",
      "description": "Optional description",
      "status": "pending",
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z"
    }
    ```
  - `400 Bad Request` â€“ missing title
    ```json
    {
      "error": "Title is required"
    }
    ```
  - `500 Internal Server Error`

#### PUT /api/tasks/:id

- **Description**: Update a task owned by the logged-in user.
- **Auth**: Required.
- **URL params**:
  - `id` â€“ task ID
- **Request body** (any subset, JSON):
  ```json
  {
    "title": "Updated title",
    "description": "Updated description",
    "status": "completed"
  }
  ```

- **Responses**:
  - `200 OK`
    ```json
    {
      "_id": "...",
      "userId": "...",
      "title": "Updated title",
      "description": "Updated description",
      "status": "completed",
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z"
    }
    ```
  - `404 Not Found` â€“ task not found
    ```json
    {
      "error": "Task not found"
    }
    ```
  - `403 Forbidden` â€“ task does not belong to the user
    ```json
    {
      "error": "Forbidden"
    }
    ```
  - `500 Internal Server Error`

#### DELETE /api/tasks/:id

- **Description**: Delete a task owned by the logged-in user.
- **Auth**: Required.
- **URL params**:
  - `id` â€“ task ID

- **Responses**:
  - `200 OK`
    ```json
    {
      "message": "Task deleted"
    }
    ```
  - `404 Not Found` â€“ task not found
    ```json
    {
      "error": "Task not found"
    }
    ```
  - `403 Forbidden` â€“ task does not belong to the user
    ```json
    {
      "error": "Forbidden"
    }
    ```
  - `500 Internal Server Error`

---

## 6. Notes


- For REST client tools (Postman, Insomnia, etc.), remember:
  - Register â†’ Login â†’ copy `token` â†’ set `Authorization: Bearer <token>` for task routes.
- When running automated tests, the backend is configured to avoid starting the HTTP server when `NODE_ENV=test`.
